{
  "enabled": true,
  "name": "Python 测试检查",
  "description": "当核心 Python 文件被修改时，自动运行相关测试确保没有破坏现有功能",
  "version": "1.0.0",
  "when": {
    "type": "fileEdited",
    "patterns": [
      "src/google_ai_search/*.py",
      "patchright-mcp/src/patchright_mcp/*.py"
    ]
  },
  "then": {
    "type": "askAgent",
    "prompt": "核心代码被修改，执行测试验证：\n\n1. 根据修改的文件确定测试范围：\n   - searcher.py → pytest tests/test_extraction.py tests/test_url.py -v\n   - server.py → pytest tests/test_server.py -v\n   - browser.py → pytest patchright-mcp/tests/ -v\n\n2. 如果测试失败，分析原因并修复代码\n\n3. 如果测试通过，简短回复「测试通过」\n\n注意：使用 pytest 的 -v 参数但不要用 --watch 模式"
  }
}
