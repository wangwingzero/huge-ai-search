# Repository Guidelines

## Project Structure & Module Organization
- `src/`: TypeScript source for the MCP server.
  - `src/index.ts`: main server entry (registers MCP tools, logging).
  - `src/searcher.ts`: Playwright-based search/session logic.
  - `src/setup.ts`: login/setup flow.
- `dist/`: compiled JS output (generated by `tsc`; not committed).
- `setup-browser.ts`: helper for browser setup during development.
- Runtime data such as `browser_data/` and `logs/` are ignored via `.gitignore`.

## Architecture Overview
- `index.ts` wires MCP tool definitions to the `AISearcher`.
- `searcher.ts` handles session lifecycle, proxy detection, and Playwright/Edge browsing.
- `setup.ts` plus `setup-browser.ts` manage login and shared storage state.

## Build, Test, and Development Commands
- `npm install`: install dependencies.
- `npm run build`: compile TypeScript to `dist/`.
- `npm run dev`: watch mode for continuous compilation.
- `npm run start`: run the built server (`node dist/index.js`).
- `npx -p huge-ai-search huge-ai-search-setup`: open Edge for Google login when testing locally.

## Coding Style & Naming Conventions
- Language: TypeScript (ESM imports), Node.js 18+.
- Indentation: 2 spaces; use semicolons and double quotes to match existing files.
- Keep functions small and descriptive; prefer explicit types for public interfaces.
- No formatter/linter is configured; follow the patterns in `src/` and keep changes consistent.

## Testing Guidelines
- There is no automated test script in `package.json` today.
- If you add tests, place them under a new `tests/` folder or next to code as `*.test.ts`, and add an `npm test` script to document how to run them.

## Commit & Pull Request Guidelines
- Commit style follows Conventional Commits (e.g., `docs: ...`, `fix: ...`).
- Keep commits focused and scoped to one change set.
- PRs should include: a clear description, linked issue (if any), and testing notes (commands run or “not run”).
- For user-facing changes, include screenshots or log excerpts when relevant.

## Configuration & Runtime Notes
- Microsoft Edge is required for Playwright-driven search.
- Login/session data is stored under the user home directory (see `.huge-ai-search/` in code and README).
- Proxy is detected via `HTTP_PROXY`/`HTTPS_PROXY`/`ALL_PROXY`, then common local ports (e.g., 10809, 7890, 10808, 7891, 1080).

## Agent-Specific Instructions
- When modifying code, use the `mcp_huge_ai_search_search` tool with at least 2–3 follow-up queries before changing files.
- You may skip searches for pure documentation updates.
